# GAS フラッシュカード - セットアップガイド

## 概要
Google Apps Script (GAS) と HTML を活用した英単語学習用フラッシュカードアプリです。

## セットアップ手順

### 1. Google スプレッドシートの作成

1. [Google ドライブ](https://drive.google.com/) にアクセス
2. 「新規」→「Google スプレッドシート」→「空白のスプレッドシート」
3. スプレッドシートに名前を付ける（例：「フラッシュカード」）
4. **スプレッドシートのIDをメモ**
   - URLの例: `https://docs.google.com/spreadsheets/d/【ここがID】/edit`
   - `1ABC123xyz...` のような文字列がIDです

### 2. Google Apps Script プロジェクトの作成

1. スプレッドシートのメニュー「拡張機能」→「Apps Script」をクリック
2. 新しい Apps Script プロジェクトが開きます
3. プロジェクト名を「フラッシュカード」に変更

### 3. ファイルのコピー

Apps Script エディタで以下のファイルを作成します：

#### 3.1 Code.gs（既存の Code.gs を置き換え）
1. `Code.gs` の内容をすべて削除
2. 本プロジェクトの `Code.gs` の内容をコピー＆ペースト
3. **重要**: `SPREADSHEET_ID` を自分のスプレッドシートIDに変更
   ```javascript
   const SPREADSHEET_ID = 'あなたのスプレッドシートID';
   ```

#### 3.2 Index.html（新規作成）
1. 「+」ボタン →「HTML」をクリック
2. ファイル名を `Index` にする（.html は自動追加）
3. 本プロジェクトの `Index.html` の内容をコピー＆ペースト

#### 3.3 Style.html（新規作成）
1. 「+」ボタン →「HTML」をクリック
2. ファイル名を `Style` にする
3. 本プロジェクトの `Style.html` の内容をコピー＆ペースト

#### 3.4 Script.html（新規作成）
1. 「+」ボタン →「HTML」をクリック
2. ファイル名を `Script` にする
3. 本プロジェクトの `Script.html` の内容をコピー＆ペースト

### 4. シートの初期化

1. Apps Script エディタで `initializeAllSheets` 関数を選択
2. 「実行」ボタンをクリック
3. 初回実行時は権限の承認が必要です：
   - 「権限を確認」をクリック
   - Googleアカウントを選択
   - 「詳細」→「（プロジェクト名）に移動」をクリック
   - 「許可」をクリック
4. スプレッドシートに3つのシート（Cards, Progress, Settings）が作成されます

### 5. デプロイ

1. 「デプロイ」→「新しいデプロイ」をクリック
2. 「種類の選択」で歯車アイコン →「ウェブアプリ」を選択
3. 設定：
   - 説明: 任意（例：「初期バージョン」）
   - 次のユーザーとして実行: 「自分」
   - アクセスできるユーザー: 「自分のみ」
4. 「デプロイ」をクリック
5. 表示されたURLをコピー（これがアプリのURLです）

### 6. 動作確認

1. デプロイで取得したURLにアクセス
2. 「デバッグ情報」セクションで以下を確認：
   - 接続状態: ✓ 接続成功
   - カード数: 3（初期サンプル）
   - フィールド数: 7
   - デッキ数: 1

## トラブルシューティング

### 「スプレッドシートに接続できません」エラー
- `SPREADSHEET_ID` が正しいか確認
- スプレッドシートへのアクセス権限があるか確認

### 画面が真っ白になる
- ブラウザの開発者ツール（F12）でエラーを確認
- Apps Script の実行ログを確認

### 再デプロイの方法
コードを修正した場合：
1. 「デプロイ」→「デプロイを管理」
2. 編集（鉛筆アイコン）をクリック
3. バージョン: 「新バージョン」を選択
4. 「デプロイ」をクリック

## ファイル構成

```
├── Code.gs          # GASサーバーサイドコード
├── Index.html       # メインHTML
├── Style.html       # CSS
├── Script.html      # クライアントサイドJavaScript
├── SPECIFICATION.md # 詳細仕様書
└── README.md        # 本ファイル
```

## 開発ステップ

| ステップ | 内容 | 状態 |
|---------|------|------|
| 1 | 基本構造 + スプレッドシート接続 | ✅ 完了 |
| 2 | カードデータ表示（表/裏めくり） | ⏳ |
| 3 | デッキ管理（ツリー表示・選択） | ⏳ |
| 4 | 学習モード・絞り込み機能 | ⏳ |
| 5 | 正解/不正解記録・進捗管理 | ⏳ |
| 6 | 読み上げ機能 | ⏳ |
| 7 | 連続読み上げ・自動めくり | ⏳ |
| 8 | 間隔反復学習 | ⏳ |
| 9 | 統計・グラフ表示 | ⏳ |
| 10 | 設定画面・設定保存 | ⏳ |

## ライセンス

MIT License
